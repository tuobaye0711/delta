# 三角洲子弹价格监控平台 - 产品设计文档

> 📅 版本：v1.0
> 🎯 目标：打造专业的子弹价格监控和交易辅助工具
> 👥 目标用户：倒子弹玩家

---

## 一、产品定位

### 1.1 核心价值

**让倒子弹更简单、更赚钱、更安全**

- 实时监控多弹种价格
- 智能推荐买入卖出时机
- 精确计算利润和回本线
- 降低决策风险

### 1.2 目标用户画像

| 用户类型 | 典型特征 | 核心需求 |
|---------|---------|---------|
| 资深倒弹党 | 日交易量大，追求最大化利润 | 快速决策、精准数据 |
| 新手倒弹党 | 刚入门，学习规律 | 价格趋势、操作建议 |
| 普通玩家 | 偶尔买卖子弹 | 实时价格、简单易用 |
| 工作室 | 批量操作，需要多账号管理 | 批量监控、数据分析 |

---

## 二、功能设计

### 2.1 核心功能模块

#### 模块一：实时价格监控 📊

**功能描述**：
- 实时显示多种子弹的当前价格
- 价格涨跌幅标识（涨绿跌红）
- 最近更新时间

**数据字段**：
- 弹种名称
- 弹药等级（1-6级）
- 当前价格（哈夫币）
- 涨跌幅（%）
- 更新时间
- 数据来源

**展示方式**：
- 卡片式布局（每种子弹一个卡片）
- 价格曲线缩略图
- 支持排序（价格、涨跌幅）

---

#### 模块二：价格历史曲线 📈

**功能描述**：
- 查看任意子弹的价格历史曲线
- 多时间维度选择（1小时、6小时、24小时、7天、30天）
- 高低点标注
- 关键事件标注（活动、赛季更新）

**图表功能**：
- K线图或折线图
- 移动平均线（MA5、MA10、MA30）
- 价格区间高亮
- 缩放和拖拽

---

#### 模块三：持仓管理 💼

**功能描述**：
- 记录用户的每笔子弹交易
- 计算持仓成本和未实现利润
- 支持多弹种、多批次持仓

**核心功能**：
- 添加交易记录（买入/卖出）
- 查看持仓列表
- 编辑/删除记录
- 导出数据

**数据结构**：
```json
{
  "id": "tx_001",
  "bulletType": "AWM .338AP",
  "action": "buy", // buy / sell
  "quantity": 100,
  "price": 100000,
  "total": 10000000,
  "timestamp": 1708780800000,
  "note": "凌晨低价买入"
}
```

**计算逻辑**：
- 持仓成本 = (买入总量 × 平均买入价) / 总持仓量
- 未实现利润 = (当前价格 - 持仓成本) × 持仓量
- 利润率 = 未实现利润 / 持仓成本 × 100%

---

#### 模块四：回本线与目标价 🎯

**功能描述**：
- 自动计算每笔交易的回本线
- 支持设置止盈/止损目标价
- 达到目标时推送通知

**核心功能**：
- 显示当前价格距离回本线的距离
- 设置止盈价格（如 +20%）
- 设置止损价格（如 -10%）
- 价格触发提醒

**界面展示**：
```
AWM .338AP
━━━━━━━━━━━━━━━
持仓：100 颗
成本：100,000 哈夫币/颗
当前：120,000 哈夫币/颗
回本线：100,000 ✓ 已盈利
止盈目标：120,000 (+20%)
止损目标：90,000 (-10%)

━━━━━━━━━━━━━━━
未实现利润：+2,000,000 哈夫币 (+20%)
```

---

#### 模块五：智能推荐 💡

**功能描述**：
- 基于历史数据推荐买入/卖出时机
- 多弹种利润率对比
- 热门弹种排名

**推荐指标**：
- 价格处于低位（近24小时最低价附近）
- 涨势明显（连续上涨）
- 时间窗口合适（如周末前、活动前）
- 流动性好（交易量大）

**展示方式**：
- 推荐列表（按利润率排序）
- 买入/卖出信号标签
- 置信度评分

---

#### 模块六：预警系统 🔔

**功能描述**：
- 价格突破阈值时发送通知
- 持仓回本/止损提醒
- 异常波动预警

**预警类型**：

| 预警类型 | 触发条件 | 频率 |
|---------|---------|------|
| 价格突破 | 价格 > 目标价 或 < 止损价 | 实时 |
| 回本提醒 | 当前价格 = 持仓成本 | 一次性 |
| 波动预警 | 短时间内价格涨跌 > 20% | 一次性 |
| 高位提醒 | 价格达到近7天最高价 | 一次性 |

---

#### 模块七：数据分析 📊

**功能描述**：
- 提供详细的数据统计和分析
- 帮助用户了解市场趋势

**分析维度**：
- 每种子弹的价格波动率
- 最佳买入/卖出时间段
- 历史利润统计
- 交易成功率

**报表类型**：
- 弹种利润排行榜
- 时间段热度分析
- 交易日志汇总

---

### 2.2 界面设计

#### 页面一：仪表盘（首页）

**布局结构**：
```
┌─────────────────────────────────────────┐
│         三角洲子弹价格监控平台            │
├─────────────────────────────────────────┤
│  🔔 通知  💼 持仓  📊 分析  ⚙️ 设置      │
├─────────────────────────────────────────┤
│                                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐│
│  │ AWM红弹  │  │ RIP弹    │  │ 金弹     ││
│  │ 120,000  │  │   638    │  │  5,200   ││
│  │  ↑ 15%   │  │   ↑ 20%  │  │  ↑ 10%   ││
│  └──────────┘  └──────────┘  └──────────┘│
│                                         │
│  ┌──────────────────────────────────┐  │
│  │        价格趋势图（最近24小时）   │  │
│  │                                  │  │
│  │        📈 曲线图                 │  │
│  │                                  │  │
│  └──────────────────────────────────┘  │
│                                         │
│  ┌──────────┐  ┌──────────┐  ┌──────────┐│
│  │ 智能推荐 │  │ 持仓概览 │  │ 今日预警 ││
│  │          │  │          │  │          ││
│  │  买入: ✅│  │ 盈利:    │  │  AWM回本 ││
│  │  卖出: ⏸│  │  +200万  │  │  已触发  ││
│  └──────────┘  └──────────┘  └──────────┘│
└─────────────────────────────────────────┘
```

#### 页面二：弹种详情页

**布局结构**：
```
┌─────────────────────────────────────────┐
│  < 返回    AWM .338AP 详情               │
├─────────────────────────────────────────┤
│                                         │
│  当前价格：120,000 哈夫币/颗            │
│  涨跌幅：↑ 15% (24h)                    │
│  更新时间：2026-02-24 17:50            │
│                                         │
│  ┌──────────────────────────────────┐  │
│  │    📈 价格趋势（7天）            │  │
│  │                                  │  │
│  │        曲线图                     │  │
│  │    ┌──────┐                      │  │
│  │    │高点  │                      │  │
│  │    │ 130K │                      │  │
│  │    └──────┘                      │  │
│  │                                  │  │
│  └──────────────────────────────────┘  │
│                                         │
│  持仓记录：                              │
│  ┌────────────────────────────────────┐ │
│  │ 2026-02-24 凌晨  买入 100颗      │ │
│  │   成本：100,000  当前：120,000   │ │
│  │   利润：+2,000,000 (+20%)         │ │
│  └────────────────────────────────────┘ │
│                                         │
│  目标价格设置：                          │
│  □ 止盈价格：140,000 (+40%)            │
│  □ 止损价格：90,000 (-10%)             │
│                                         │
│  📊 智能分析：                           │
│  • 价格处于中等水平，建议观望           │
│  • 周末需求可能增加，可考虑逢低吸纳     │
│  • 近期波动较大，注意风险               │
└─────────────────────────────────────────┘
```

#### 页面三：持仓管理页

**布局结构**：
```
┌─────────────────────────────────────────┐
│  💼 我的持仓                            │
├─────────────────────────────────────────┤
│                                         │
│  持仓总价值：50,000,000 哈夫币          │
│  未实现利润：+5,000,000 (+10%)          │
│                                         │
│  ┌─ 添加交易记录                        │
│                                         │
│  持仓列表：                              │
│  ┌────────────────────────────────────┐ │
│  │ AWM .338AP  ▼                      │ │
│  │ 持仓：100颗 | 成本：100,000         │ │
│  │ 当前：120,000 | 利润：+2,000,000   │ │
│  │ [详情] [卖出] [编辑]               │ │
│  └────────────────────────────────────┘ │
│                                         │
│  ┌────────────────────────────────────┐ │
│  │ 9×19 RIP    ▼                      │ │
│  │ 持仓：10000颗 | 成本：400           │ │
│  │ 当前：638 | 利润：+2,380,000       │ │
│  │ [详情] [卖出] [编辑]               │ │
│  └────────────────────────────────────┘ │
│                                         │
│  ┌────────────────────────────────────┐ │
│  │ 金弹        ▼                      │ │
│  │ 持仓：5000颗 | 成本：4,500          │ │
│  │ 当前：5,200 | 利润：+3,500,000     │ │
│  │ [详情] [卖出] [编辑]               │ │
│  └────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

---

### 2.3 数据库设计

#### 表一：子弹类型表 (bullet_types)

| 字段名 | 类型 | 说明 |
|-------|------|------|
| id | INT | 主键 |
| name | VARCHAR | 弹种名称（如 AWM .338AP） |
| level | INT | 弹药等级（1-6） |
| description | TEXT | 描述 |
| is_hot | BOOLEAN | 是否热门弹种 |
| created_at | TIMESTAMP | 创建时间 |

#### 表二：价格历史表 (price_history)

| 字段名 | 类型 | 说明 |
|-------|------|------|
| id | INT | 主键 |
| bullet_id | INT | 弹种ID（外键） |
| price | DECIMAL | 价格（哈夫币） |
| source | VARCHAR | 数据来源 |
| created_at | TIMESTAMP | 记录时间 |

**索引**：
- (bullet_id, created_at) - 用于查询历史曲线

#### 表三：用户交易表 (user_transactions)

| 字段名 | 类型 | 说明 |
|-------|------|------|
| id | INT | 主键 |
| user_id | VARCHAR | 用户ID |
| bullet_id | INT | 弹种ID |
| action | ENUM | 操作类型（buy/sell） |
| quantity | INT | 数量 |
| price | DECIMAL | 单价 |
| total | DECIMAL | 总金额 |
| note | TEXT | 备注 |
| created_at | TIMESTAMP | 交易时间 |

#### 表四：用户目标价表 (user_targets)

| 字段名 | 类型 | 说明 |
|-------|------|------|
| id | INT | 主键 |
| user_id | VARCHAR | 用户ID |
| bullet_id | INT | 弹种ID |
| target_type | ENUM | 目标类型（profit/loss） |
| target_price | DECIMAL | 目标价格 |
| is_active | BOOLEAN | 是否激活 |
| created_at | TIMESTAMP | 创建时间 |

---

## 三、技术栈选择

### 3.1 后端技术

| 组件 | 技术选型 | 原因 |
|------|---------|------|
| 语言 | Node.js (TypeScript) | 异步IO，适合数据采集 |
| 框架 | Express.js | 轻量级，灵活 |
| 数据库 | SQLite | 零配置，适合单机部署 |
| ORM | Prisma | 类型安全，迁移简单 |
| 定时任务 | node-cron | 简单易用 |

### 3.2 前端技术

| 组件 | 技术选型 | 原因 |
|------|---------|------|
| 框架 | Vue 3 + Vite | 快速开发，生态成熟 |
| UI库 | Element Plus | 美观，组件丰富 |
| 图表 | ECharts | 功能强大，可视化好 |
| 状态管理 | Pinia | 轻量级，Vue3官方推荐 |

### 3.3 数据采集

| 数据源 | 方式 | 频率 |
|-------|------|------|
| jbskins.com | 爬虫 | 每5分钟 |
| deltaforce.build | API或爬虫 | 每10分钟 |
| kkrb.net | 爬虫 | 每15分钟 |
| 交易行 | 手动录入（暂无API） | - |

---

## 四、开发计划

### 阶段三：开发实施 💻

#### 3.1 环境搭建
- [ ] 初始化项目
- [ ] 配置数据库
- [ ] 搭建前后端框架

#### 3.2 数据采集模块
- [ ] jbskins 爬虫
- [ ] 数据存储逻辑
- [ ] 异常处理和重试

#### 3.3 后端API开发
- [ ] 价格数据API
- [ ] 持仓管理API
- [ ] 智能推荐算法

#### 3.4 前端开发
- [ ] 仪表盘页面
- [ ] 弹种详情页
- [ ] 持仓管理页

#### 3.5 测试优化
- [ ] 功能测试
- [ ] 数据准确性验证
- [ ] 性能优化

---

## 五、未来扩展

### 5.1 V2.0 功能规划

- [ ] 用户账号系统（登录注册）
- [ ] 数据同步到云端
- [ ] 移动端适配
- [ ] 社区功能（分享策略）
- [ ] 机器人集成（自动交易）

### 5.2 商业化方向

- [ ] 付费高级功能
- [ ] API 接口售卖
- [ ] 广告收入
- [ ] 社区订阅

---

## 六、总结

本产品设计围绕"让倒子弹更简单、更赚钱、更安全"的核心价值，提供了：

✅ **实时监控** - 多弹种价格实时更新
✅ **智能分析** - 基于数据的买入卖出建议
✅ **持仓管理** - 精确计算利润和回本线
✅ **风险控制** - 止盈止损目标提醒

技术栈成熟可靠，开发周期可控，可在 1-2 周内完成 MVP 版本。

---

📝 下一步：开始环境搭建和开发实施
